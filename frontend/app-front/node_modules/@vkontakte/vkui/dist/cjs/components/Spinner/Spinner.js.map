{"version":3,"sources":["../../../../src/components/Spinner/Spinner.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon16Spinner, Icon24Spinner, Icon32Spinner, Icon44Spinner } from '@vkontakte/icons';\nimport { hasReactNode } from '@vkontakte/vkjs';\nimport { useReducedMotion } from '../../lib/animation';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { VisuallyHidden } from '../VisuallyHidden/VisuallyHidden';\nimport styles from './Spinner.module.css';\n\nexport interface SpinnerProps extends HTMLAttributesWithRootRef<HTMLSpanElement> {\n  size?: 'small' | 'regular' | 'medium' | 'large';\n  disableAnimation?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Spinner\n */\nexport const Spinner: React.FC<SpinnerProps> = React.memo(\n  ({\n    size = 'regular',\n    children = 'Загружается...',\n    disableAnimation = false,\n    ...restProps\n  }: SpinnerProps) => {\n    const isReducedMotion = useReducedMotion();\n    const SpinnerIcon = {\n      small: Icon16Spinner,\n      regular: Icon24Spinner,\n      medium: Icon32Spinner,\n      large: Icon44Spinner,\n    }[size];\n    let svgAnimateElement: React.ReactNode = null;\n\n    const [isReadyForSetSVGAnimateElement, setIsReadyForSetSVGAnimateElement] = React.useState(\n      disableAnimation ? true : false,\n    );\n\n    React.useEffect(function waitReactHydrationBeforeSetSVGAnimateElement() {\n      setIsReadyForSetSVGAnimateElement(true);\n    }, []);\n\n    if (isReadyForSetSVGAnimateElement && !disableAnimation) {\n      if (isReducedMotion) {\n        svgAnimateElement = (\n          <animate\n            attributeName=\"opacity\"\n            keyTimes=\"0; 0.5; 1\"\n            values=\"1; 0.1; 1\"\n            begin=\"0s\"\n            dur=\"2s\"\n            repeatCount=\"indefinite\"\n          />\n        );\n      } else {\n        const center = { small: 8, regular: 12, medium: 16, large: 22 }[size];\n        svgAnimateElement = (\n          <animateTransform\n            attributeType=\"XML\"\n            attributeName=\"transform\"\n            type=\"rotate\"\n            from={`0 ${center} ${center}`}\n            to={`360 ${center} ${center}`}\n            dur=\"0.7s\"\n            repeatCount=\"indefinite\"\n          />\n        );\n      }\n    }\n\n    return (\n      <RootComponent\n        Component=\"span\"\n        role=\"status\"\n        {...restProps}\n        baseClassName={styles['Spinner']}\n      >\n        <SpinnerIcon>{svgAnimateElement}</SpinnerIcon>\n        {hasReactNode(children) && <VisuallyHidden>{children}</VisuallyHidden>}\n      </RootComponent>\n    );\n  },\n);\n\nSpinner.displayName = 'Spinner';\n"],"names":["Spinner","React","memo","size","children","disableAnimation","restProps","isReducedMotion","useReducedMotion","SpinnerIcon","small","Icon16Spinner","regular","Icon24Spinner","medium","Icon32Spinner","large","Icon44Spinner","svgAnimateElement","isReadyForSetSVGAnimateElement","setIsReadyForSetSVGAnimateElement","useState","useEffect","waitReactHydrationBeforeSetSVGAnimateElement","animate","attributeName","keyTimes","values","begin","dur","repeatCount","center","animateTransform","attributeType","type","from","to","RootComponent","Component","role","baseClassName","hasReactNode","VisuallyHidden","displayName"],"mappings":";;;;+BAiBaA;;;eAAAA;;;;;;;;iEAjBU;uBACoD;sBAC9C;2BACI;+BAEH;gCACC;AAWxB,MAAMA,wBAAkCC,OAAMC,IAAI,CACvD;QAAC,EACCC,OAAO,SAAS,EAChBC,WAAW,gBAAgB,EAC3BC,mBAAmB,KAAK,EAEX,WADVC;QAHHH;QACAC;QACAC;;IAGA,MAAME,kBAAkBC,IAAAA,2BAAgB;IACxC,MAAMC,cAAc;QAClBC,OAAOC,oBAAa;QACpBC,SAASC,oBAAa;QACtBC,QAAQC,oBAAa;QACrBC,OAAOC,oBAAa;IACtB,CAAC,CAACd,KAAK;IACP,IAAIe,oBAAqC;IAEzC,MAAM,CAACC,gCAAgCC,kCAAkC,GAAGnB,OAAMoB,QAAQ,CACxFhB,mBAAmB,OAAO;IAG5BJ,OAAMqB,SAAS,CAAC,SAASC;QACvBH,kCAAkC;IACpC,GAAG,EAAE;IAEL,IAAID,kCAAkC,CAACd,kBAAkB;QACvD,IAAIE,iBAAiB;YACnBW,kCACE,qBAACM;gBACCC,eAAc;gBACdC,UAAS;gBACTC,QAAO;gBACPC,OAAM;gBACNC,KAAI;gBACJC,aAAY;;QAGlB,OAAO;YACL,MAAMC,SAAS;gBAAErB,OAAO;gBAAGE,SAAS;gBAAIE,QAAQ;gBAAIE,OAAO;YAAG,CAAC,CAACb,KAAK;YACrEe,kCACE,qBAACc;gBACCC,eAAc;gBACdR,eAAc;gBACdS,MAAK;gBACLC,MAAM,CAAC,EAAE,EAAEJ,OAAO,CAAC,EAAEA,OAAO,CAAC;gBAC7BK,IAAI,CAAC,IAAI,EAAEL,OAAO,CAAC,EAAEA,OAAO,CAAC;gBAC7BF,KAAI;gBACJC,aAAY;;QAGlB;IACF;IAEA,qBACE,sBAACO,4BAAa;QACZC,WAAU;QACVC,MAAK;OACDjC;QACJkC,aAAa;;0BAEb,qBAAC/B;0BAAaS;;YACbuB,IAAAA,kBAAY,EAACrC,2BAAa,qBAACsC,8BAAc;0BAAEtC;;;;AAGlD;AAGFJ,QAAQ2C,WAAW,GAAG"}